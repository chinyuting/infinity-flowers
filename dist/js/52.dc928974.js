"use strict";(self["webpackChunkinfinity_flowers"]=self["webpackChunkinfinity_flowers"]||[]).push([[52],{7052:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var i=a(6252),s=a(3577),r=a(9963);const l={class:"container"},d=(0,i._)("h5",{class:"search-text"},"請輸入訂購人Email查詢訂單",-1),n={class:"input-group mb-3"},o=(0,i._)("button",{class:"btn btn-outline-secondary",type:"submit",id:"button-addon2"},"查詢",-1),c={key:0},h={class:"position-absolute bottom-50 start-50 translate-middle text-center text-deep"},u=(0,i._)("h2",null,[(0,i._)("i",{class:"bi bi-flower3 text-danger"}),(0,i.Uk)("查無資料 ")],-1),p={key:1},m={class:"table table-hover"},g=(0,i._)("thead",{class:"searchThead"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"建立日期"),(0,i._)("th",{scope:"col"},"商品項目"),(0,i._)("th",{scope:"col"},"金額"),(0,i._)("th",{scope:"col"},"付款狀態"),(0,i._)("th")])],-1),_={class:"align-middle"},b={scope:"row","data-th":"建立日期",class:"fw-bolder"},f={"data-th":"商品項目"},w=(0,i._)("br",null,null,-1),y={"data-th":"金額"},v={"data-th":"付款狀態"},k={key:0,class:"text-success"},O={key:1,class:"text-danger"},L=["disabled","onClick"];function D(e,t,a,D,x,E){const z=(0,i.up)("LoadingOverlay"),C=(0,i.up)("v-field"),$=(0,i.up)("error-message"),K=(0,i.up)("v-form");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(z,{active:x.isLoading},null,8,["active"]),(0,i._)("div",l,[d,(0,i.Wm)(K,{onSubmit:E.searchOrder},{default:(0,i.w5)((({errors:e})=>[(0,i._)("div",n,[(0,i.Wm)(C,{type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"訂購人Email","aria-label":"email",name:"email",rules:"email","aria-describedby":"button-addon2",modelValue:x.searchEmail,"onUpdate:modelValue":t[0]||(t[0]=e=>x.searchEmail=e),onKeyup:(0,r.D2)(E.searchOrder,["enter"])},null,8,["class","modelValue","onKeyup"]),o,(0,i.Wm)($,{name:"email",class:"invalid-feedback"})])])),_:1},8,["onSubmit"]),x.searchstate&&0===x.filterOrder.length?((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("div",h,[(0,i._)("p",null,"訂購人Email : "+(0,s.zw)(x.email),1),u])])):x.searchstate&&0!==x.filterOrder.length?((0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("table",m,[g,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(x.filterOrder,((t,a)=>((0,i.wg)(),(0,i.iD)("tbody",{key:a,class:"searchTbody"},[(0,i._)("tr",_,[(0,i._)("td",b,(0,s.zw)(e.$filters.date(t.create_at)),1),(0,i._)("td",f,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.products,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t},[(0,i.Uk)((0,s.zw)(e.product.title),1),w,(0,i.Uk)("數量："+(0,s.zw)(e.qty)+" "+(0,s.zw)(e.product.unit),1)])))),128))])]),(0,i._)("td",y,(0,s.zw)(t.total),1),(0,i._)("td",v,[t.is_paid?((0,i.wg)(),(0,i.iD)("span",k,"已付款")):((0,i.wg)(),(0,i.iD)("span",O,"未付款"))]),(0,i._)("td",null,[(0,i._)("button",{class:"btn btn-danger w-100",disabled:t.is_paid,onClick:(0,r.iM)((e=>E.payOrder(t.id)),["prevent"])},"前往付款",8,L)])])])))),128))])])):(0,i.kq)("",!0)])],64)}a(7658);var x={data(){return{OrderList:[],pagination:{},searchEmail:"",filterOrder:{},searchstate:!1,isLoading:!1,email:""}},inject:["emitter"],methods:{getOrder(e=1){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/flower-api/orders?page=${e}`;this.$http.get(t).then((e=>{e.data.success&&(this.OrderList=e.data.orders,this.pagination=e.data.pagination,this.isLoading=!1)})).catch((e=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:e.response.data})}))},payOrder(e){this.$router.push(`/order/${e}`)},searchOrder(){this.isLoading=!0,this.searchstate=!0,this.filterOrder=this.OrderList.filter((e=>e.user.email===this.searchEmail)),this.isLoading=!1,this.email=this.searchEmail}},created(){this.getOrder()},mounted(){this.emitter.emit("page-change",{data:"orderSearch"})}},E=a(3744);const z=(0,E.Z)(x,[["render",D]]);var C=z}}]);
//# sourceMappingURL=52.dc928974.js.map