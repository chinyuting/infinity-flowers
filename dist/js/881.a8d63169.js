"use strict";(self["webpackChunkinfinity_flowers"]=self["webpackChunkinfinity_flowers"]||[]).push([[881],{5830:function(t,i){i["Z"]={inject:["emitter"],methods:{getCarts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/flower-api/cart";this.$http.get(t).then((t=>{t.data.success&&(this.cartqty=0,this.isLoading=!1,this.CartList=t.data.data,this.cartLength=t.data.data.carts.length,t.data.data.carts.forEach((t=>{this.cartqty+=t.qty})),this.emitter.emit("push-notice",{data:this.cartLength,category:"cart"}))}))}}}},2497:function(t,i){i["Z"]={methods:{getFavorite(){if(localStorage.getItem("favoriteItem")){const t=localStorage.getItem("favoriteItem");this.idList=JSON.parse(t)}else this.idList=[]}}}},5881:function(t,i,e){e.r(i),e.d(i,{default:function(){return M}});e(7658);var s=e(6252),a=e(9963),o=e(3577);const r={class:"container"},c={key:0,class:"position-absolute bottom-50 start-50 translate-middle text-center"},d=(0,s._)("h2",{class:"text-nowrap"},"尚未收藏任何產品",-1),n={key:1},l={class:"row"},h={class:"card mt-1 mb-2 mx-auto productcard"},p=["onClick"],g={class:"overflow-hidden text-light position-relative productcard-pic"},u={class:"position-absolute bg-secondary px-2 bottom-0 end-0 rounded m-1"},v={class:"card-text"},f=["src","alt"],m={class:"card-body text-dark"},w={class:"row overflow-hidden"},y=["title"],_={class:"mw-25 text-end col-2 add-favorite"},k=["onClick"],b={key:0,class:"bi bi-heart text-danger"},x={key:1,class:"bi bi-heart-fill text-danger"},L={class:"card-text"},C={key:0,class:"text-decoration-line-through fs-6"},D={class:"fs-5"},F={class:"card-footer"},$=["onClick"];function I(t,i,e,I,q,z){return(0,s.wg)(),(0,s.iD)("div",r,[0===q.favoriteList.length?((0,s.wg)(),(0,s.iD)("div",c,[d,(0,s._)("button",{type:"button",class:"btn btn-danger mt-2",onClick:i[0]||(i[0]=(0,a.iM)((i=>t.$router.push("/products")),["prevent"]))},"馬上逛逛")])):((0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",l,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(q.favoriteList,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{class:"col-sm-12 col-md-6 col-lg-4",key:i},[(0,s._)("div",h,[(0,s._)("a",{class:"productcard-content",href:"#",onClick:(0,a.iM)((i=>z.goForDetail(t.id)),["prevent"])},[(0,s._)("div",g,[(0,s._)("div",u,[(0,s._)("p",v,(0,o.zw)(t.category),1)]),(0,s._)("img",{src:t.imageUrl,alt:t.title,class:"card-img-top d-block mx-auto align-middle"},null,8,f)]),(0,s._)("div",m,[(0,s._)("h5",w,[(0,s._)("div",{class:"card-title col-10 overflow-hidden productcard-title",title:t.title},(0,o.zw)(t.title),9,y),(0,s._)("div",_,[(0,s._)("a",{href:"#",onClick:(0,a.iM)((i=>z.removefavorite(t)),["stop","prevent"])},[q.idList.every((i=>t.id!==i))?((0,s.wg)(),(0,s.iD)("i",b)):((0,s.wg)(),(0,s.iD)("i",x)),(0,s.Uk)((0,o.zw)(null))],8,k)])]),(0,s._)("p",L,[t.origin_price!==t.price?((0,s.wg)(),(0,s.iD)("span",C," NT$"+(0,o.zw)(t.origin_price),1)):(0,s.kq)("",!0),(0,s._)("span",D," NT$"+(0,o.zw)(t.price),1)])])],8,p),(0,s._)("div",F,[(0,s._)("a",{href:"#",class:"btn btn-danger w-100",onClick:(0,a.iM)((i=>z.addCart(t)),["prevent"])},"加入購物車",8,$)])])])))),128))])]))])}var q=e(5830),z=e(2497),O={data(){return{favoriteList:[],pagination:{},page:1,productCategory:[],idList:[]}},inject:["emitter"],methods:{getFavoriteProducts(){const t="https://vue3-course-api.hexschool.io/api/flower-api/products/all";this.$http.get(t).then((t=>{if(t.data.success){const i=t.data.products;this.pagination=t.data.pagination;const e=[];this.favoriteList=[],i.forEach((t=>{e.push(t.category),this.idList.some((i=>t.id===i))&&this.favoriteList.push(t)})),this.productCategory=e.filter(((t,i,e)=>e.indexOf(t)===i))}}))},addCart(t){const i="https://vue3-course-api.hexschool.io/api/flower-api/cart",e={product_id:t.id,qty:1};this.$http.post(i,{data:e}).then((t=>{t.data.success&&(this.getFavoriteProducts(),this.getCarts(),this.emitter.emit("push-message",{style:"success",title:t.data.message}))}))},removefavorite(t){this.idList.indexOf(t.id),this.idList.splice(this.idList.indexOf(t.id),1),localStorage.setItem("favoriteItem",JSON.stringify(this.idList)),this.getFavoriteProducts(),this.emitter.emit("push-message",{style:"danger",title:"已取消收藏"})},goForDetail(t){this.$router.push(`/products/${t}`)}},mixins:[q.Z,z.Z],created(){this.getFavoriteProducts(),this.getFavorite()},mounted(){this.emitter.emit("page-change",{data:"favorite"})}},S=e(3744);const Z=(0,S.Z)(O,[["render",I]]);var M=Z}}]);
//# sourceMappingURL=881.a8d63169.js.map