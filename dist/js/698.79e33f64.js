"use strict";(self["webpackChunkinfinity_flowers"]=self["webpackChunkinfinity_flowers"]||[]).push([[698],{4698:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var i=a(6252),s=a(3577),r=a(9963);const l={class:"container"},d=(0,i._)("h5",null,"請輸入訂購人Email查詢訂單",-1),n={class:"input-group mb-3"},o={key:0},c=(0,i._)("div",{class:"position-absolute bottom-50 start-50 translate-middle text-center"},[(0,i._)("h2",null,[(0,i._)("i",{class:"bi bi-flower3 text-danger"}),(0,i.Uk)(" 查無資料 ")])],-1),h=[c],u={key:1},p={class:"table table-hover"},g=(0,i._)("thead",{class:"searchThead"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"建立日期"),(0,i._)("th",{scope:"col"},"商品項目"),(0,i._)("th",{scope:"col"},"金額"),(0,i._)("th",{scope:"col"},"付款狀態"),(0,i._)("th")])],-1),m={class:"align-middle"},_={scope:"row","data-th":"建立日期",class:"fw-bolder"},b={"data-th":"商品項目"},f=(0,i._)("br",null,null,-1),w={"data-th":"金額"},k={"data-th":"付款狀態"},v={key:0,class:"text-success"},y={key:1,class:"text-danger"},O=["disabled","onClick"];function L(e,t,a,c,L,D){const x=(0,i.up)("LoadingOverlay"),C=(0,i.up)("v-field"),E=(0,i.up)("error-message"),z=(0,i.up)("v-form");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(x,{active:L.isLoading},null,8,["active"]),(0,i._)("div",l,[d,(0,i.Wm)(z,null,{default:(0,i.w5)((({errors:e})=>[(0,i._)("div",n,[(0,i.Wm)(C,{type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"訂購人Email","aria-label":"email",name:"email",rules:"email","aria-describedby":"button-addon2",modelValue:L.searchEmail,"onUpdate:modelValue":t[0]||(t[0]=e=>L.searchEmail=e)},null,8,["class","modelValue"]),(0,i._)("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:t[1]||(t[1]=(...e)=>D.searchOrder&&D.searchOrder(...e))},"查詢"),(0,i.Wm)(E,{name:"email",class:"invalid-feedback"})])])),_:1}),L.searchstate&&0===L.filterOrder.length?((0,i.wg)(),(0,i.iD)("div",o,h)):L.searchstate&&0!==L.filterOrder.length?((0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("table",p,[g,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(L.filterOrder,((e,t)=>((0,i.wg)(),(0,i.iD)("tbody",{key:t,class:"searchTbody"},[(0,i._)("tr",m,[(0,i._)("td",_,(0,s.zw)(this.$filters.date(e.create_at)),1),(0,i._)("td",b,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.products,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t},[(0,i.Uk)((0,s.zw)(e.product.title),1),f,(0,i.Uk)("數量："+(0,s.zw)(e.qty)+" "+(0,s.zw)(e.product.unit),1)])))),128))])]),(0,i._)("td",w,(0,s.zw)(e.total),1),(0,i._)("td",k,[e.is_paid?((0,i.wg)(),(0,i.iD)("span",v,"已付款")):((0,i.wg)(),(0,i.iD)("span",y,"未付款"))]),(0,i._)("td",null,[(0,i._)("button",{class:"btn btn-danger w-100",disabled:e.is_paid,onClick:(0,r.iM)((t=>D.payOrder(e.id)),["prevent"])},"前往付款",8,O)])])])))),128))])])):(0,i.kq)("",!0)])],64)}a(7658);var D={data(){return{OrderList:[],pagination:{},searchEmail:"",filterOrder:{},searchstate:!1,isLoading:!1}},inject:["emitter"],methods:{getOrder(e=1){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/flower-api/orders?page=${e}`;this.$http.get(t).then((e=>{e.data.success&&(this.OrderList=e.data.orders,this.pagination=e.data.pagination,this.isLoading=!1)}))},payOrder(e){this.$router.push(`/order/${e}`)},searchOrder(){this.isLoading=!0,this.searchstate=!0,this.filterOrder=this.OrderList.filter((e=>e.user.email===this.searchEmail)),this.isLoading=!1}},created(){this.getOrder()},mounted(){this.emitter.emit("page-change",{data:"orderSearch"})}},x=a(3744);const C=(0,x.Z)(D,[["render",L]]);var E=C}}]);
//# sourceMappingURL=698.79e33f64.js.map