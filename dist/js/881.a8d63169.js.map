{"version":3,"file":"js/881.a8d63169.js","mappings":"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","sources":["webpack://infinity-flowers/./src/mixins/GetCarts.js","webpack://infinity-flowers/./src/mixins/GetFavorites.js","webpack://infinity-flowers/./src/views/Front/FavoriteView.vue","webpack://infinity-flowers/./src/views/Front/FavoriteView.vue?1c7b"],"sourcesContent":["export default {\n  inject: ['emitter'],\n  methods: {\n    getCarts() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.cartqty = 0;\n            this.isLoading = false;\n            this.CartList = res.data.data;\n            this.cartLength = res.data.data.carts.length;\n            res.data.data.carts.forEach((element) => {\n              this.cartqty += element.qty;\n            });\n            this.emitter.emit('push-notice', {\n              data: this.cartLength,\n              category: 'cart',\n            });\n          }\n        });\n    },\n  },\n};\n","export default {\n  // inject: ['emitter'],\n  methods: {\n    getFavorite() {\n      if (localStorage.getItem('favoriteItem')) {\n        const tempList = localStorage.getItem('favoriteItem');\n        this.idList = JSON.parse(tempList);\n      } else {\n        this.idList = [];\n      }\n    },\n  },\n};\n","<template>\n<div class=\"container\">\n  <div v-if=\"favoriteList.length === 0 \"\n  class=\"position-absolute bottom-50 start-50 translate-middle text-center\">\n    <h2 class=\"text-nowrap\">尚未收藏任何產品</h2>\n    <button type=\"button\" class=\"btn btn-danger mt-2\"\n    @click.prevent=\"$router.push('/products')\">馬上逛逛</button>\n  </div>\n  <div v-else>\n    <div class=\"row\">\n    <!-- 商品列表 -->\n      <div class=\"col-sm-12 col-md-6 col-lg-4\"\n        v-for=\"(item, key) in favoriteList\" :key=\"key\">\n        <div class=\"card mt-1 mb-2 mx-auto productcard\" >\n          <a class=\"productcard-content\" href=\"#\" @click.prevent=\"goForDetail(item.id)\">\n            <div class=\"overflow-hidden text-light position-relative productcard-pic\">\n              <!-- 商品類別標示 -->\n              <div class=\"position-absolute bg-secondary px-2 bottom-0 end-0 rounded m-1\">\n                <p class=\"card-text\">{{ item.category }}</p>\n              </div>\n              <!-- 商品圖片 -->\n              <img :src=\"item.imageUrl\" :alt=\"item.title\"\n              class=\"card-img-top d-block mx-auto align-middle\">\n            </div>\n            <div class=\"card-body text-dark\">\n              <!-- 商品名稱 -->\n              <h5 class=\"row overflow-hidden\">\n                <div class=\"card-title col-10 overflow-hidden productcard-title\"\n                  :title=\"item.title\">\n                    {{ item.title }}\n                  </div>\n                <!-- 加入收藏 -->\n                <div class=\"mw-25 text-end col-2 add-favorite\">\n                  <a href=\"#\" @click.stop.prevent=\"removefavorite(item)\">\n                    <i class=\"bi bi-heart text-danger\"\n                    v-if=\"idList.every((id) => item.id !== id)\"></i>\n                    <i class=\"bi bi-heart-fill text-danger\"\n                    v-else></i>{{ null }}\n                  </a>\n                </div>\n              </h5>\n              <!-- 商品資訊 -->\n              <p class=\"card-text\">\n                <span class=\"text-decoration-line-through fs-6\"\n                v-if=\"item.origin_price !== item.price\"> NT${{ item.origin_price }}</span>\n                <span class=\"fs-5\"> NT${{ item.price }}</span>\n              </p>\n            </div>\n          </a>\n          <div class=\"card-footer\">\n            <a href=\"#\" class=\"btn btn-danger w-100\"\n            @click.prevent=\"addCart(item)\">加入購物車</a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport cartMixin from '@/mixins/GetCarts';\nimport favoritesMixin from '@/mixins/GetFavorites';\n\nexport default {\n  data() {\n    return {\n      favoriteList: [],\n      pagination: {},\n      page: 1,\n      productCategory: [],\n      idList: [],\n    };\n  },\n  inject: ['emitter'],\n  methods: {\n    getFavoriteProducts() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http.get(api)\n        .then((res) => {\n          if (res.data.success) {\n            const productList = res.data.products;\n            this.pagination = res.data.pagination;\n            const category = [];\n            this.favoriteList = [];\n            productList.forEach((item) => {\n              category.push(item.category);\n              if (this.idList.some((id) => item.id === id)) {\n                this.favoriteList.push(item);\n              }\n            });\n            this.productCategory = category.filter((element, index, arr) => arr.indexOf(element)\n            === index);\n          }\n        });\n    },\n    addCart(item) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const cart = {\n        product_id: item.id,\n        qty: 1,\n      };\n      this.$http.post(api, { data: cart })\n        .then((res) => {\n          if (res.data.success) {\n            this.getFavoriteProducts();\n            this.getCarts();\n            this.emitter.emit('push-message', {\n              style: 'success',\n              title: res.data.message,\n            });\n          }\n        });\n    },\n    removefavorite(item) {\n      this.idList.indexOf(item.id);\n      this.idList.splice(this.idList.indexOf(item.id), 1);\n      localStorage.setItem('favoriteItem', JSON.stringify(this.idList));\n      this.getFavoriteProducts();\n      this.emitter.emit('push-message', {\n        style: 'danger',\n        title: '已取消收藏',\n      });\n    },\n    goForDetail(id) {\n      this.$router.push(`/products/${id}`);\n    },\n  },\n  mixins: [cartMixin, favoritesMixin],\n  created() {\n    this.getFavoriteProducts();\n    this.getFavorite();\n  },\n  mounted() {\n    this.emitter.emit('page-change', {\n      data: 'favorite',\n    });\n  },\n};\n</script>\n\n<style>\n.productcard{\n  max-width: 276px;\n}\n.productcard-content{\n  text-decoration: none;\n}\n.productcard-pic img{\n  transition: all 1s;\n}\n.productcard-content:hover .productcard-pic img{\n  transform: scale(1.1);\n}\n.productcard-pic{\n  height: 345px;\n}\n.productcard-content .card-title{\n  max-width: 225px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.product-card-content:nth-child(3n-1){\n  margin: 0 auto;\n}\n.add-favorite{\n  font-size: 20px;\n  transition: font-size .5s;\n}\n.add-favorite:hover{\n  font-size: 23px;\n}\n</style>\n","import { render } from \"./FavoriteView.vue?vue&type=template&id=8bf07b5a\"\nimport script from \"./FavoriteView.vue?vue&type=script&lang=js\"\nexport * from \"./FavoriteView.vue?vue&type=script&lang=js\"\n\nimport \"./FavoriteView.vue?vue&type=style&index=0&id=8bf07b5a&lang=css\"\n\nimport exportComponent from \"/Users/maoweichen/chiu/infinity-flowers/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["inject","methods","getCarts","this","isLoading","api","$http","get","then","res","data","success","cartqty","CartList","cartLength","carts","length","forEach","element","qty","emitter","emit","category","getFavorite","localStorage","getItem","tempList","idList","JSON","parse","class","_createElementVNode","_createElementBlock","_hoisted_1","$data","favoriteList","_hoisted_2","_hoisted_3","type","onClick","_cache","_withModifiers","$event","_ctx","$router","push","_hoisted_4","_hoisted_5","_Fragment","_renderList","item","key","_hoisted_6","href","$options","goForDetail","id","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","src","imageUrl","alt","title","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","removefavorite","every","_hoisted_17","_hoisted_18","_hoisted_19","origin_price","price","_hoisted_20","_hoisted_21","_hoisted_22","addCart","_hoisted_23","pagination","page","productCategory","getFavoriteProducts","productList","products","some","filter","index","arr","indexOf","cart","product_id","post","style","message","splice","setItem","stringify","mixins","cartMixin","favoritesMixin","created","mounted","__exports__","render"],"sourceRoot":""}