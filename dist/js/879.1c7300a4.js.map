{"version":3,"file":"js/879.1c7300a4.js","mappings":"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","sources":["webpack://infinity-flowers/./src/mixins/GetCarts.js","webpack://infinity-flowers/./src/mixins/GetFavorites.js","webpack://infinity-flowers/./src/mixins/GoDetail.js","webpack://infinity-flowers/./src/views/Front/FavoriteView.vue","webpack://infinity-flowers/./src/views/Front/FavoriteView.vue?1c7b"],"sourcesContent":["export default {\n  inject: ['emitter'],\n  methods: {\n    getCarts() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.cartqty = 0;\n            this.isLoading = false;\n            this.CartList = res.data.data;\n            this.cartLength = res.data.data.carts.length;\n            res.data.data.carts.forEach((element) => {\n              this.cartqty += element.qty;\n            });\n            this.emitter.emit('push-Cartnotice', {\n              data: this.cartLength,\n              category: 'cart',\n            });\n          }\n        });\n    },\n  },\n};\n","export default {\n  // inject: ['emitter'],\n  methods: {\n    getFavorite() {\n      if (localStorage.getItem('favoriteItem')) {\n        const tempList = localStorage.getItem('favoriteItem');\n        this.idList = JSON.parse(tempList);\n        this.favoriteLength = this.idList.length;\n      } else {\n        this.idList = [];\n        this.cartLength = 0;\n        console.log(this.favoriteLength);\n      }\n      this.emitter.emit('push-Favnotice', {\n        data: this.favoriteLength,\n        category: 'cart',\n      });\n    },\n  },\n};\n","export default {\n  inject: ['emitter'],\n  methods: {\n    goForDetail(item) {\n      if (localStorage.getItem('viewedItem')) {\n        const tempList = localStorage.getItem('viewedItem');\n        this.viewedList = JSON.parse(tempList);\n      } else {\n        this.viewedList = [];\n      }\n      if (this.viewedList.every((viewedId) => viewedId !== item.id)) {\n        this.viewedList.push(item.id);\n        localStorage.setItem('viewedItem', JSON.stringify(this.viewedList));\n      }\n      this.emitter.emit('push-ProductDetail', {\n        data: item,\n        qty: 1,\n      });\n      this.$router.push(`/products/${item.id}`);\n    },\n  },\n};\n","<template>\n  <LoadingOverlay :active=\"isLoading\"/>\n  <div class=\"container\">\n    <div v-if=\"favoriteList.length === 0\"\n      class=\"position-relative text-center my-5 py-5\">\n      <h2 class=\"text-nowrap\">尚未收藏任何產品</h2>\n      <button type=\"button\" class=\"btn button-light-color mt-2\"\n        @click.prevent=\"$router.push('/products')\">馬上逛逛</button>\n    </div>\n    <div v-else>\n      <div class=\"row\">\n        <div class=\"col-sm-12 col-md-6 col-lg-4\"\n          v-for=\"item in favoriteList\" :key=\"item.id\">\n          <div class=\"card mt-1 mb-2 mx-auto product-card\" >\n            <a class=\"product-card-content\" href=\"#\" @click.prevent=\"goForDetail(item)\">\n              <div class=\"overflow-hidden text-light position-relative product-card-pic\">\n                <div class=\"position-absolute bg-secondary px-2 bottom-0 end-0 rounded m-2\">\n                  <p class=\"card-text\">{{ item.category }}</p>\n                </div>\n                <img :src=\"item.imageUrl\" :alt=\"item.title\"\n                  class=\"card-img-top d-block mx-auto align-middle\">\n              </div>\n              <div class=\"card-body text-dark\">\n                <h5 class=\"row overflow-hidden\">\n                  <div class=\"card-title col-10 overflow-hidden product-card-title\"\n                    :title=\"item.title\">\n                    {{ item.title }}\n                  </div>\n                  <div class=\"mw-25 text-end col-2 add-favorite\">\n                    <a href=\"#\" @click.stop.prevent=\"removeFavorite(item)\">\n                      <i class=\"bi bi-heart text-danger\"\n                        v-if=\"idList.every((id) => item.id !== id)\"></i>\n                      <i class=\"bi bi-heart-fill text-danger\"\n                        v-else></i>{{ null }}\n                    </a>\n                  </div>\n                </h5>\n                <p class=\"card-text\">\n                  <span class=\"text-decoration-line-through fs-6\"\n                    v-if=\"item.origin_price !== item.price\"> NT${{ item.origin_price }}</span>\n                  <span class=\"fs-5\"> NT${{ item.price }}</span>\n                </p>\n              </div>\n            </a>\n            <div class=\"card-footer\">\n              <button class=\"btn button-light-color w-100\" type=\"button\"\n                @click.prevent=\"addCart(item)\">加入購物車</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport cartMixin from '@/mixins/GetCarts';\nimport favoritesMixin from '@/mixins/GetFavorites';\nimport detailMixin from '@/mixins/GoDetail';\n\nexport default {\n  data() {\n    return {\n      favoriteList: [],\n      pagination: {},\n      page: 1,\n      productCategory: [],\n      idList: [],\n      isLoading: false,\n    };\n  },\n  inject: ['emitter'],\n  methods: {\n    getFavoriteProducts() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http.get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.isLoading = false;\n            const productList = res.data.products;\n            this.pagination = res.data.pagination;\n            const category = [];\n            this.favoriteList = [];\n            productList.forEach((item) => {\n              category.push(item.category);\n              if (this.idList.some((id) => item.id === id)) {\n                this.favoriteList.push(item);\n              }\n            });\n            this.productCategory = category.filter((element, index, arr) => arr.indexOf(element)\n            === index);\n          }\n        })\n        .catch((err) => {\n          this.isLoading = false;\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: err.response.data,\n          });\n        });\n    },\n    addCart(item) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const cart = {\n        product_id: item.id,\n        qty: 1,\n      };\n      this.$http.post(api, { data: cart })\n        .then((res) => {\n          if (res.data.success) {\n            this.isLoading = false;\n            this.getFavoriteProducts();\n            this.getCarts();\n            this.emitter.emit('push-message', {\n              style: 'success',\n              title: res.data.message,\n            });\n          }\n        })\n        .catch((err) => {\n          this.isLoading = false;\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: err.response.data,\n          });\n        });\n    },\n    removeFavorite(item) {\n      this.idList.indexOf(item.id);\n      this.idList.splice(this.idList.indexOf(item.id), 1);\n      localStorage.setItem('favoriteItem', JSON.stringify(this.idList));\n      this.getFavoriteProducts();\n      this.getFavorite();\n      this.emitter.emit('push-message', {\n        style: 'danger',\n        title: '已取消收藏',\n      });\n    },\n  },\n  mixins: [cartMixin, favoritesMixin, detailMixin],\n  created() {\n    this.getFavoriteProducts();\n    this.getFavorite();\n  },\n  mounted() {\n    this.emitter.emit('page-change', {\n      data: 'favorite',\n    });\n  },\n};\n</script>\n\n<style>\n.product-card{\n  max-width: 276px;\n}\n.product-card-content{\n  text-decoration: none;\n}\n.product-card-pic img{\n  transition: all 1s;\n}\n.product-card-content:hover .product-card-pic img{\n  transform: scale(1.1);\n}\n.product-card-pic{\n  height: 345px;\n  border-radius: 0.375rem 0.375rem 0 0;\n}\n.product-card-content .card-title{\n  max-width: 225px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.product-card-content:nth-child(3n-1){\n  margin: 0 auto;\n}\n.add-favorite{\n  font-size: 20px;\n  transition: font-size .5s;\n}\n.add-favorite:hover{\n  font-size: 23px;\n}\n</style>\n","import { render } from \"./FavoriteView.vue?vue&type=template&id=3b5ca7c4\"\nimport script from \"./FavoriteView.vue?vue&type=script&lang=js\"\nexport * from \"./FavoriteView.vue?vue&type=script&lang=js\"\n\nimport \"./FavoriteView.vue?vue&type=style&index=0&id=3b5ca7c4&lang=css\"\n\nimport exportComponent from \"/Users/maoweichen/chiu/infinity-flowers/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["inject","methods","getCarts","this","isLoading","api","$http","get","then","res","data","success","cartqty","CartList","cartLength","carts","length","forEach","element","qty","emitter","emit","category","getFavorite","localStorage","getItem","tempList","idList","JSON","parse","favoriteLength","console","log","goForDetail","item","viewedList","every","viewedId","id","push","setItem","stringify","$router","class","_createElementVNode","_createVNode","_component_LoadingOverlay","active","$data","_hoisted_1","favoriteList","_createElementBlock","_hoisted_2","_hoisted_3","type","onClick","_cache","_withModifiers","$event","_ctx","_hoisted_4","_hoisted_5","_Fragment","_renderList","key","_hoisted_6","href","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","src","imageUrl","alt","title","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","$options","removeFavorite","_hoisted_17","_hoisted_18","_hoisted_19","origin_price","price","_hoisted_20","_hoisted_21","_hoisted_22","addCart","_hoisted_23","pagination","page","productCategory","getFavoriteProducts","productList","products","some","filter","index","arr","indexOf","catch","err","style","response","cart","product_id","post","message","splice","mixins","cartMixin","favoritesMixin","detailMixin","created","mounted","__exports__","render"],"sourceRoot":""}