"use strict";(self["webpackChunkinfinity_flowers"]=self["webpackChunkinfinity_flowers"]||[]).push([[669],{5830:function(t,s){s["Z"]={inject:["emitter"],methods:{getCarts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/flower-api/cart";this.$http.get(t).then((t=>{t.data.success&&(this.cartqty=0,this.isLoading=!1,this.CartList=t.data.data,this.cartLength=t.data.data.carts.length,t.data.data.carts.forEach((t=>{this.cartqty+=t.qty})),this.emitter.emit("push-notice",{data:this.cartLength,category:"cart"}))}))}}}},2497:function(t,s){s["Z"]={methods:{getFavorite(){if(localStorage.getItem("favoriteItem")){const t=localStorage.getItem("favoriteItem");this.idList=JSON.parse(t)}else this.idList=[]}}}},6669:function(t,s,e){e.r(s),e.d(s,{default:function(){return W}});var i=e(3396),a=e(7139),r=e(9242);const l={class:"container"},o={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},c={class:"breadcrumb"},d=(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"#",class:"breadcrumb-link"},"首頁")],-1),n=(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"#/products",class:"breadcrumb-link"},"產品")],-1),u={class:"breadcrumb-item active","aria-current":"page"},p={class:"row"},h={id:"carouselExampleControls",class:"carousel slide col-12 col-md-5","data-bs-ride":"carousel"},g={class:"carousel-inner"},b={class:"carousel-item active"},m=["src"],y={key:0},v=["src"],_={key:0,class:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleControls","data-bs-slide":"prev"},f=(0,i._)("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),w=(0,i._)("span",{class:"visually-hidden"},"Previous",-1),k=[f,w],L={key:1,class:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleControls","data-bs-slide":"next"},q=(0,i._)("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),I=(0,i._)("span",{class:"visually-hidden"},"Next",-1),C=[q,I],x={class:"col-md-7"},S={class:"col-10 overflow-hidden"},D={style:{"white-space":"pre-line"}},U={class:"input-group"},O=["disabled"],F={key:0},Z=(0,i._)("i",{class:"bi bi-heart",title:"加入收藏"},null,-1),$={key:1},z=(0,i._)("i",{class:"bi bi-heart-fill",title:"加入收藏"},null,-1),E=["disabled"],M={key:0,class:"spinner-border spinner-border-sm text-light",role:"status"},N=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),J=[N],P={key:1,class:"bi bi-cart-plus-fill"};function H(t,s,e,f,w,q){const I=(0,i.up)("LoadingOverlay");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(I,{active:w.isLoading},null,8,["active"]),(0,i._)("div",l,[(0,i._)("nav",o,[(0,i._)("ol",c,[d,n,(0,i._)("li",u,(0,a.zw)(w.product.title),1)])]),(0,i._)("div",p,[(0,i._)("div",h,[(0,i._)("div",g,[(0,i._)("div",b,[(0,i._)("img",{src:w.product.imageUrl,class:"d-block w-100",alt:"..."},null,8,m)]),w.product.imagesUrl?((0,i.wg)(),(0,i.iD)("div",y,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.product.imagesUrl,((t,s)=>((0,i.wg)(),(0,i.iD)("div",{class:"carousel-item",key:s},[(0,i._)("img",{src:t,alt:"",class:"d-block w-100"},null,8,v)])))),128))])):(0,i.kq)("",!0)]),w.product.imagesUrl?((0,i.wg)(),(0,i.iD)("button",_,k)):(0,i.kq)("",!0),w.product.imagesUrl?((0,i.wg)(),(0,i.iD)("button",L,C)):(0,i.kq)("",!0)]),(0,i._)("div",x,[(0,i._)("h1",S,(0,a.zw)(w.product.title),1),(0,i._)("p",null,(0,a.zw)(w.product.description),1),(0,i._)("p",D,(0,a.zw)(w.product.content),1),(0,i._)("div",U,[(0,i._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:s[0]||(s[0]=(0,r.iM)((t=>q.refreshqty(-1)),["prevent"])),disabled:1===w.product_qty},"- ",8,O),(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",placeholder:"Recipient's username","aria-label":"qty","onUpdate:modelValue":s[1]||(s[1]=t=>w.product_qty=t)},null,512),[[r.nr,w.product_qty]]),(0,i._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:s[2]||(s[2]=(0,r.iM)((t=>q.refreshqty(1)),["prevent"]))},"+ ")]),(0,i._)("button",{type:"button",onClick:s[3]||(s[3]=(0,r.iM)((s=>q.updateFavorite(t.item)),["prevent"])),class:"btn btn-danger mt-2 me-2"},[w.idList.every((t=>w.productId!==t))?((0,i.wg)(),(0,i.iD)("span",F,[Z,(0,i.Uk)(" 加入收藏 ")])):((0,i.wg)(),(0,i.iD)("span",$,[z,(0,i.Uk)(" 取消收藏")]))]),(0,i._)("button",{type:"button",onClick:s[4]||(s[4]=(0,r.iM)(((...t)=>q.addCart&&q.addCart(...t)),["prevent"])),class:"btn btn-danger mt-2",disabled:w.loadingStatus},[w.loadingStatus?((0,i.wg)(),(0,i.iD)("div",M,J)):((0,i.wg)(),(0,i.iD)("i",P)),(0,i.Uk)(" 加入購物車 ")],8,E)])])])],64)}e(7658);var Y=e(5830),j=e(2497),K={data(){return{productId:"",product:{},product_qty:1,idList:[],isLoading:!1,loadingStatus:!1}},methods:{getProductDetails(){this.isLoading=!0,this.productId=this.$route.params.productId;const t=`https://vue3-course-api.hexschool.io/api/flower-api/product/${this.productId}`;this.$http.get(t).then((t=>{t.data.success&&(this.product=t.data.product,this.isLoading=!1)}))},updateFavorite(){this.loadingStatus=!0,this.idList.every((t=>this.productId!==t))?(this.idList.push(this.productId),localStorage.setItem("favoriteItem",JSON.stringify(this.idList)),this.emitter.emit("push-message",{style:"success",title:"已新增至收藏"})):(this.idList.indexOf(this.productId),this.idList.splice(this.idList.indexOf(this.productId),1),localStorage.setItem("favoriteItem",JSON.stringify(this.idList)),this.emitter.emit("push-message",{style:"danger",title:"已取消收藏"})),this.loadingStatus=!1,this.getFavorite()},addCart(){this.loadingStatus=!0;const t="https://vue3-course-api.hexschool.io/api/flower-api/cart",s={product_id:this.product.id,qty:this.product_qty};this.$http.post(t,{data:s}).then((t=>{t.data.success&&(this.getCarts(),this.loadingStatus=!1,this.emitter.emit("push-message",{style:"success",title:t.data.message}))}))},refreshqty(t){this.product_qty+=t}},mixins:[Y.Z,j.Z],created(){this.getProductDetails(),this.getFavorite()}},R=e(89);const V=(0,R.Z)(K,[["render",H]]);var W=V}}]);
//# sourceMappingURL=669.2c68ef34.js.map