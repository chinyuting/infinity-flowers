"use strict";(self["webpackChunkinfinity_flowers"]=self["webpackChunkinfinity_flowers"]||[]).push([[922],{5830:function(t,s){s["Z"]={inject:["emitter"],methods:{getCarts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/flower-api/cart";this.$http.get(t).then((t=>{t.data.success&&(this.cartqty=0,this.isLoading=!1,this.CartList=t.data.data,this.cartLength=t.data.data.carts.length,t.data.data.carts.forEach((t=>{this.cartqty+=t.qty})),this.emitter.emit("push-Cartnotice",{data:this.cartLength,category:"cart"}))}))}}}},2497:function(t,s){s["Z"]={methods:{getFavorite(){if(localStorage.getItem("favoriteItem")){const t=localStorage.getItem("favoriteItem");this.idList=JSON.parse(t),this.favoriteLength=this.idList.length}else this.idList=[],this.cartLength=0,console.log(this.favoriteLength);this.emitter.emit("push-Favnotice",{data:this.favoriteLength,category:"cart"})}}}},2922:function(t,s,e){e.r(s),e.d(s,{default:function(){return X}});var i=e(6252),a=e(3577),r=e(9963);const l={class:"container"},o={"aria-label":"breadcrumb"},c={class:"breadcrumb"},d=(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"#",class:"breadcrumb-link"},"首頁")],-1),n=(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"#/products",class:"breadcrumb-link"},"產品")],-1),u={class:"breadcrumb-item active","aria-current":"page"},p={class:"row"},h={id:"carouselExampleControls",class:"carousel slide col-12 col-md-5","data-bs-ride":"carousel"},g={class:"carousel-inner"},m={class:"carousel-item active"},b=["src","alt"],_={key:0},v=["src","alt"],y={key:0,class:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleControls","data-bs-slide":"prev"},f=(0,i._)("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),k=(0,i._)("span",{class:"visually-hidden"},"Previous",-1),w=[f,k],L={key:1,class:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleControls","data-bs-slide":"next"},q=(0,i._)("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),I=(0,i._)("span",{class:"visually-hidden"},"Next",-1),x=[q,I],C={class:"col-md-7"},U={class:"col-10 overflow-hidden"},S={class:"detail-content"},D={class:"row"},$={class:"input-group col-lg-8 col-7 w-auto"},z=["disabled"],F={class:"col-lg-4 col-5"},N={class:"text-end"},O={key:0,class:"text-decoration-line-through fs-6"},Z={key:0},E=(0,i._)("i",{class:"bi bi-heart",title:"加入收藏"},null,-1),M={key:1},J=(0,i._)("i",{class:"bi bi-heart-fill",title:"加入收藏"},null,-1),P=["disabled"],H={key:0,class:"spinner-border spinner-border-sm text-light",role:"status"},T=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),Y=[T],j={key:1,class:"bi bi-cart-plus-fill"},K=(0,i._)("hr",null,null,-1),R=(0,i._)("p",null,[(0,i.Uk)(" 產品說明&保養"),(0,i._)("br"),(0,i.Uk)(" ＊保持乾燥避免潮濕、陽光直射，適合放置在冷氣房或於濕度20-65度之間的環境。"),(0,i._)("br"),(0,i.Uk)(" ＊永生花、不凋花是鮮花經特殊技術處理，能保有鮮花般色彩，可保持2-3年不等。"),(0,i._)("br"),(0,i.Uk)(" ＊乾燥花是鮮花自然風乾處理，可擺放約半年至1年，隨著時間會漸漸褪色為正常狀況。"),(0,i._)("br"),(0,i.Uk)(" ＊若有灰塵使用柔軟的刷子ｅｘ毛筆，輕輕刷拭。"),(0,i._)("br")],-1);function V(t,s,e,f,k,q){const I=(0,i.up)("LoadingOverlay");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(I,{active:k.isLoading},null,8,["active"]),(0,i._)("div",l,[(0,i._)("nav",o,[(0,i._)("ol",c,[d,n,(0,i._)("li",u,(0,a.zw)(k.product.title),1)])]),(0,i._)("div",p,[(0,i._)("div",h,[(0,i._)("div",g,[(0,i._)("div",m,[(0,i._)("img",{src:k.product.imageUrl,class:"d-block w-100",alt:k.product.title},null,8,b)]),k.product.imagesUrl?((0,i.wg)(),(0,i.iD)("div",_,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(k.product.imagesUrl,((t,s)=>((0,i.wg)(),(0,i.iD)("div",{class:"carousel-item",key:s},[(0,i._)("img",{src:t,alt:k.product.title,class:"d-block w-100"},null,8,v)])))),128))])):(0,i.kq)("",!0)]),k.product.imagesUrl?((0,i.wg)(),(0,i.iD)("button",y,w)):(0,i.kq)("",!0),k.product.imagesUrl?((0,i.wg)(),(0,i.iD)("button",L,x)):(0,i.kq)("",!0)]),(0,i._)("div",C,[(0,i._)("h1",U,(0,a.zw)(k.product.title),1),(0,i._)("p",null,(0,a.zw)(k.product.description),1),(0,i._)("p",S,(0,a.zw)(k.product.content),1),(0,i._)("div",D,[(0,i._)("div",$,[(0,i._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:s[0]||(s[0]=(0,r.iM)((t=>q.refreshqty(-1)),["prevent"])),disabled:1===k.product_qty},"- ",8,z),(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",placeholder:"Recipient's username","aria-label":"qty","onUpdate:modelValue":s[1]||(s[1]=t=>k.product_qty=t)},null,512),[[r.nr,k.product_qty]]),(0,i._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:s[2]||(s[2]=(0,r.iM)((t=>q.refreshqty(1)),["prevent"]))},"+ ")]),(0,i._)("div",F,[(0,i._)("h3",N,[k.product.origin_price!==k.product.price?((0,i.wg)(),(0,i.iD)("span",O," NT$"+(0,a.zw)(t.$filters.currency(k.product.origin_price)),1)):(0,i.kq)("",!0),(0,i._)("span",null,"NT$"+(0,a.zw)(t.$filters.currency(k.product.price)),1),(0,i.Uk)(" / "+(0,a.zw)(k.product.unit),1)])])]),(0,i._)("div",null,[(0,i._)("button",{type:"button",onClick:s[3]||(s[3]=(0,r.iM)((s=>q.updateFavorite(t.item)),["prevent"])),class:"btn btn-danger mt-2 me-2"},[k.idList.every((t=>k.productId!==t))?((0,i.wg)(),(0,i.iD)("span",Z,[E,(0,i.Uk)(" 加入收藏 ")])):((0,i.wg)(),(0,i.iD)("span",M,[J,(0,i.Uk)(" 取消收藏")]))]),(0,i._)("button",{type:"button",onClick:s[4]||(s[4]=(0,r.iM)(((...t)=>q.addCart&&q.addCart(...t)),["prevent"])),class:"btn btn-danger mt-2",disabled:k.loadingStatus},[k.loadingStatus?((0,i.wg)(),(0,i.iD)("div",H,Y)):((0,i.wg)(),(0,i.iD)("i",j)),(0,i.Uk)(" 加入購物車 ")],8,P)]),K,R])])])],64)}e(7658);var W=e(5830),A=e(2497),B={data(){return{productId:"",product:{},product_qty:1,idList:[],isLoading:!1,loadingStatus:!1}},methods:{getProductDetails(){this.isLoading=!0,this.productId=this.$route.params.productId;const t=`https://vue3-course-api.hexschool.io/api/flower-api/product/${this.productId}`;this.$http.get(t).then((t=>{t.data.success&&(this.product=t.data.product,this.isLoading=!1)})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data})}))},updateFavorite(){this.loadingStatus=!0,this.idList.every((t=>this.productId!==t))?(this.idList.push(this.productId),localStorage.setItem("favoriteItem",JSON.stringify(this.idList)),this.emitter.emit("push-message",{style:"success",title:"已新增至收藏"})):(this.idList.indexOf(this.productId),this.idList.splice(this.idList.indexOf(this.productId),1),localStorage.setItem("favoriteItem",JSON.stringify(this.idList)),this.emitter.emit("push-message",{style:"danger",title:"已取消收藏"})),this.loadingStatus=!1,this.getFavorite()},addCart(){this.loadingStatus=!0;const t="https://vue3-course-api.hexschool.io/api/flower-api/cart",s={product_id:this.product.id,qty:this.product_qty};this.$http.post(t,{data:s}).then((t=>{t.data.success&&(this.getCarts(),this.loadingStatus=!1,this.emitter.emit("push-message",{style:"success",title:t.data.message}))})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data})}))},refreshqty(t){this.product_qty+=t}},mixins:[W.Z,A.Z],created(){this.getProductDetails(),this.getFavorite()}},G=e(3744);const Q=(0,G.Z)(B,[["render",V]]);var X=Q}}]);
//# sourceMappingURL=922.a2a0be56.js.map