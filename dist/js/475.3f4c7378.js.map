{"version":3,"file":"js/475.3f4c7378.js","mappings":"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","sources":["webpack://infinity-flowers/./src/mixins/GetCarts.js","webpack://infinity-flowers/./src/mixins/GetFavorites.js","webpack://infinity-flowers/./src/views/Front/FavoriteView.vue","webpack://infinity-flowers/./src/views/Front/FavoriteView.vue?1c7b"],"sourcesContent":["export default {\n  inject: ['emitter'],\n  methods: {\n    getCarts() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.cartqty = 0;\n            this.isLoading = false;\n            this.CartList = res.data.data;\n            this.cartLength = res.data.data.carts.length;\n            res.data.data.carts.forEach((element) => {\n              this.cartqty += element.qty;\n            });\n            this.emitter.emit('push-notice', {\n              data: this.cartLength,\n              category: 'cart',\n            });\n          }\n        });\n    },\n  },\n};\n","export default {\n  // inject: ['emitter'],\n  methods: {\n    getFavorite() {\n      if (localStorage.getItem('favoriteItem')) {\n        const tempList = localStorage.getItem('favoriteItem');\n        this.idList = JSON.parse(tempList);\n      } else {\n        this.idList = [];\n      }\n    },\n  },\n};\n","<template>\n<div class=\"container\">\n  <div v-if=\"favoriteList.length === 0 \"\n  class=\"position-absolute bottom-50 start-50 translate-middle text-center\">\n    <h2 class=\"text-nowrap\">尚未收藏任何產品</h2>\n    <button type=\"button\" class=\"btn btn-danger mt-2\"\n    @click.prevent=\"$router.push('/products')\">馬上逛逛</button>\n  </div>\n  <div v-else>\n    <div class=\"row\">\n    <!-- 商品列表 -->\n      <div class=\"col-sm-12 col-md-6 col-lg-4\"\n        v-for=\"(item, key) in favoriteList\" :key=\"key\">\n        <div class=\"card mt-1 mb-2 mx-auto\" style=\"max-width: 280px;\">\n          <a class=\"productcard\" href=\"#\" @click.prevent=\"goForDetail(item.id)\">\n          <!-- 商品圖片 -->\n            <div class=\"overflow-hidden text-light position-relative\" style=\"height: 345px;\">\n              <div class=\"position-absolute bg-secondary px-2 bottom-0 end-0 rounded\">\n                <p class=\"card-text\">{{ item.category }}</p>\n              </div>\n              <img :src=\"item.imageUrl\" :alt=\"item.title\"\n              class=\"card-img-top d-block mx-auto align-middle\">\n            </div>\n            <div class=\"card-body text-dark\">\n              <!-- 加入收藏 -->\n              <h5 class=\"card-title\">{{ item.title }}\n                <span>\n                  <a href=\"#\" @click.stop.prevent=\"removefavorite(item)\">\n                    <i class=\"bi bi-heart text-danger\"\n                    v-if=\"idList.every((id) => item.id !== id)\"></i>\n                    <i class=\"bi bi-heart-fill text-danger\"\n                    v-else></i>{{ null }}\n                  </a>\n                </span>\n              </h5>\n              <!-- 商品資訊 -->\n              <p class=\"card-text\">\n                <span class=\"text-decoration-line-through fs-6\"\n                v-if=\"item.origin_price !== item.price\"> NT${{ item.origin_price }}</span>\n                <span class=\"fs-5\"> NT${{ item.price }}</span>\n              </p>\n            </div>\n          </a>\n          <div class=\"card-footer\">\n            <a href=\"#\" class=\"btn btn-danger\" @click.prevent=\"addCart(item)\"\n            style=\"z-index: 5\">加入購物車</a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport cartMixin from '@/mixins/GetCarts';\nimport favoritesMixin from '@/mixins/GetFavorites';\n\nexport default {\n  data() {\n    return {\n      favoriteList: [],\n      pagination: {},\n      page: 1,\n      productCategory: [],\n      idList: [],\n    };\n  },\n  inject: ['emitter'],\n  methods: {\n    getFavoriteProducts() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http.get(api)\n        .then((res) => {\n          if (res.data.success) {\n            const productList = res.data.products;\n            this.pagination = res.data.pagination;\n            const category = [];\n            this.favoriteList = [];\n            productList.forEach((item) => {\n              category.push(item.category);\n              if (this.idList.some((id) => item.id === id)) {\n                this.favoriteList.push(item);\n              }\n            });\n            this.productCategory = category.filter((element, index, arr) => arr.indexOf(element)\n            === index);\n          }\n        });\n    },\n    addCart(item) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const cart = {\n        product_id: item.id,\n        qty: 1,\n      };\n      this.$http.post(api, { data: cart })\n        .then((res) => {\n          if (res.data.success) {\n            this.getFavoriteProducts();\n            this.getCarts();\n            this.emitter.emit('push-message', {\n              style: 'success',\n              title: res.data.message,\n            });\n          }\n        });\n    },\n    removefavorite(item) {\n      this.idList.indexOf(item.id);\n      this.idList.splice(this.idList.indexOf(item.id), 1);\n      localStorage.setItem('favoriteItem', JSON.stringify(this.idList));\n      this.getFavoriteProducts();\n      this.emitter.emit('push-message', {\n        style: 'danger',\n        title: '已取消收藏',\n      });\n    },\n    goForDetail(id) {\n      this.$router.push(`/products/${id}`);\n    },\n  },\n  mixins: [cartMixin, favoritesMixin],\n  created() {\n    this.getFavoriteProducts();\n    this.getFavorite();\n  },\n  mounted() {\n    this.emitter.emit('page-change', {\n      data: 'favorite',\n    });\n  },\n};\n</script>\n\n<style>\n.productcard{\n  text-decoration: none;\n}\n</style>\n","import { render } from \"./FavoriteView.vue?vue&type=template&id=6cb3d10b\"\nimport script from \"./FavoriteView.vue?vue&type=script&lang=js\"\nexport * from \"./FavoriteView.vue?vue&type=script&lang=js\"\n\nimport \"./FavoriteView.vue?vue&type=style&index=0&id=6cb3d10b&lang=css\"\n\nimport exportComponent from \"/Users/maoweichen/chiu/infinity-flowers/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["inject","methods","getCarts","this","isLoading","api","$http","get","then","res","data","success","cartqty","CartList","cartLength","carts","length","forEach","element","qty","emitter","emit","category","getFavorite","localStorage","getItem","tempList","idList","JSON","parse","class","_createElementVNode","style","_createElementBlock","_hoisted_1","$data","favoriteList","_hoisted_2","_hoisted_3","type","onClick","_cache","_withModifiers","$event","_ctx","$router","push","_hoisted_4","_hoisted_5","_Fragment","_renderList","item","key","_hoisted_6","href","$options","goForDetail","id","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","src","imageUrl","alt","title","_hoisted_12","_hoisted_13","removefavorite","every","_hoisted_15","_hoisted_16","_hoisted_17","origin_price","price","_hoisted_18","_hoisted_19","_hoisted_20","addCart","_hoisted_21","pagination","page","productCategory","getFavoriteProducts","productList","products","some","filter","index","arr","indexOf","cart","product_id","post","message","splice","setItem","stringify","mixins","cartMixin","favoritesMixin","created","mounted","__exports__","render"],"sourceRoot":""}