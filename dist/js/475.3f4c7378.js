"use strict";(self["webpackChunkinfinity_flowers"]=self["webpackChunkinfinity_flowers"]||[]).push([[475],{5830:function(t,i){i["Z"]={inject:["emitter"],methods:{getCarts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/flower-api/cart";this.$http.get(t).then((t=>{t.data.success&&(this.cartqty=0,this.isLoading=!1,this.CartList=t.data.data,this.cartLength=t.data.data.carts.length,t.data.data.carts.forEach((t=>{this.cartqty+=t.qty})),this.emitter.emit("push-notice",{data:this.cartLength,category:"cart"}))}))}}}},2497:function(t,i){i["Z"]={methods:{getFavorite(){if(localStorage.getItem("favoriteItem")){const t=localStorage.getItem("favoriteItem");this.idList=JSON.parse(t)}else this.idList=[]}}}},4475:function(t,i,e){e.r(i),e.d(i,{default:function(){return S}});e(7658);var s=e(6252),a=e(9963),r=e(3577);const o={class:"container"},c={key:0,class:"position-absolute bottom-50 start-50 translate-middle text-center"},d=(0,s._)("h2",{class:"text-nowrap"},"尚未收藏任何產品",-1),n={key:1},l={class:"row"},h={class:"card mt-1 mb-2 mx-auto",style:{"max-width":"280px"}},p=["onClick"],g={class:"overflow-hidden text-light position-relative",style:{height:"345px"}},u={class:"position-absolute bg-secondary px-2 bottom-0 end-0 rounded"},f={class:"card-text"},m=["src","alt"],v={class:"card-body text-dark"},y={class:"card-title"},w=["onClick"],x={key:0,class:"bi bi-heart text-danger"},k={key:1,class:"bi bi-heart-fill text-danger"},_={class:"card-text"},b={key:0,class:"text-decoration-line-through fs-6"},L={class:"fs-5"},C={class:"card-footer"},D=["onClick"];function F(t,i,e,F,$,z){return(0,s.wg)(),(0,s.iD)("div",o,[0===$.favoriteList.length?((0,s.wg)(),(0,s.iD)("div",c,[d,(0,s._)("button",{type:"button",class:"btn btn-danger mt-2",onClick:i[0]||(i[0]=(0,a.iM)((i=>t.$router.push("/products")),["prevent"]))},"馬上逛逛")])):((0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",l,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)($.favoriteList,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{class:"col-sm-12 col-md-6 col-lg-4",key:i},[(0,s._)("div",h,[(0,s._)("a",{class:"productcard",href:"#",onClick:(0,a.iM)((i=>z.goForDetail(t.id)),["prevent"])},[(0,s._)("div",g,[(0,s._)("div",u,[(0,s._)("p",f,(0,r.zw)(t.category),1)]),(0,s._)("img",{src:t.imageUrl,alt:t.title,class:"card-img-top d-block mx-auto align-middle"},null,8,m)]),(0,s._)("div",v,[(0,s._)("h5",y,[(0,s.Uk)((0,r.zw)(t.title)+" ",1),(0,s._)("span",null,[(0,s._)("a",{href:"#",onClick:(0,a.iM)((i=>z.removefavorite(t)),["stop","prevent"])},[$.idList.every((i=>t.id!==i))?((0,s.wg)(),(0,s.iD)("i",x)):((0,s.wg)(),(0,s.iD)("i",k)),(0,s.Uk)((0,r.zw)(null))],8,w)])]),(0,s._)("p",_,[t.origin_price!==t.price?((0,s.wg)(),(0,s.iD)("span",b," NT$"+(0,r.zw)(t.origin_price),1)):(0,s.kq)("",!0),(0,s._)("span",L," NT$"+(0,r.zw)(t.price),1)])])],8,p),(0,s._)("div",C,[(0,s._)("a",{href:"#",class:"btn btn-danger",onClick:(0,a.iM)((i=>z.addCart(t)),["prevent"]),style:{"z-index":"5"}},"加入購物車",8,D)])])])))),128))])]))])}var $=e(5830),z=e(2497),I={data(){return{favoriteList:[],pagination:{},page:1,productCategory:[],idList:[]}},inject:["emitter"],methods:{getFavoriteProducts(){const t="https://vue3-course-api.hexschool.io/api/flower-api/products/all";this.$http.get(t).then((t=>{if(t.data.success){const i=t.data.products;this.pagination=t.data.pagination;const e=[];this.favoriteList=[],i.forEach((t=>{e.push(t.category),this.idList.some((i=>t.id===i))&&this.favoriteList.push(t)})),this.productCategory=e.filter(((t,i,e)=>e.indexOf(t)===i))}}))},addCart(t){const i="https://vue3-course-api.hexschool.io/api/flower-api/cart",e={product_id:t.id,qty:1};this.$http.post(i,{data:e}).then((t=>{t.data.success&&(this.getFavoriteProducts(),this.getCarts(),this.emitter.emit("push-message",{style:"success",title:t.data.message}))}))},removefavorite(t){this.idList.indexOf(t.id),this.idList.splice(this.idList.indexOf(t.id),1),localStorage.setItem("favoriteItem",JSON.stringify(this.idList)),this.getFavoriteProducts(),this.emitter.emit("push-message",{style:"danger",title:"已取消收藏"})},goForDetail(t){this.$router.push(`/products/${t}`)}},mixins:[$.Z,z.Z],created(){this.getFavoriteProducts(),this.getFavorite()},mounted(){this.emitter.emit("page-change",{data:"favorite"})}},q=e(3744);const O=(0,q.Z)(I,[["render",F]]);var S=O}}]);
//# sourceMappingURL=475.3f4c7378.js.map