{"version":3,"file":"js/248.b457eaea.js","mappings":"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","sources":["webpack://infinity-flowers/./src/mixins/GetCarts.js","webpack://infinity-flowers/./src/mixins/GetFavorites.js","webpack://infinity-flowers/./src/views/Front/FavoriteView.vue","webpack://infinity-flowers/./src/views/Front/FavoriteView.vue?1c7b"],"sourcesContent":["export default {\n  inject: ['emitter'],\n  methods: {\n    getCarts() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.cartqty = 0;\n            this.isLoading = false;\n            this.CartList = res.data.data;\n            this.cartLength = res.data.data.carts.length;\n            res.data.data.carts.forEach((element) => {\n              this.cartqty += element.qty;\n            });\n            this.emitter.emit('push-Cartnotice', {\n              data: this.cartLength,\n              category: 'cart',\n            });\n          }\n        });\n    },\n  },\n};\n","export default {\n  // inject: ['emitter'],\n  methods: {\n    getFavorite() {\n      if (localStorage.getItem('favoriteItem')) {\n        const tempList = localStorage.getItem('favoriteItem');\n        this.idList = JSON.parse(tempList);\n        this.favoriteLength = this.idList.length;\n      } else {\n        this.idList = [];\n        this.cartLength = 0;\n        console.log(this.favoriteLength);\n      }\n      this.emitter.emit('push-Favnotice', {\n        data: this.favoriteLength,\n        category: 'cart',\n      });\n    },\n  },\n};\n","<template>\n<LoadingOverlay :active=\"isLoading\"/>\n<div class=\"container\">\n  <div v-if=\"favoriteList.length === 0 \"\n  class=\"position-relative text-center my-5 py-5\">\n    <h2 class=\"text-nowrap\">尚未收藏任何產品</h2>\n    <button type=\"button\" class=\"btn button-lightcolor mt-2\"\n    @click.prevent=\"$router.push('/products')\">馬上逛逛</button>\n  </div>\n  <div v-else>\n    <div class=\"row\">\n    <!-- 商品列表 -->\n      <div class=\"col-sm-12 col-md-6 col-lg-4\"\n      v-for=\"(item, key) in favoriteList\" :key=\"key\">\n        <div class=\"card mt-1 mb-2 mx-auto productcard\" >\n          <a class=\"productcard-content\" href=\"#\" @click.prevent=\"goForDetail(item.id)\">\n            <div class=\"overflow-hidden text-light position-relative productcard-pic\">\n              <!-- 商品類別標示 -->\n              <div class=\"position-absolute bg-secondary px-2 bottom-0 end-0 rounded m-2\">\n                <p class=\"card-text\">{{ item.category }}</p>\n              </div>\n              <!-- 商品圖片 -->\n              <img :src=\"item.imageUrl\" :alt=\"item.title\"\n              class=\"card-img-top d-block mx-auto align-middle\">\n            </div>\n            <div class=\"card-body text-dark\">\n              <!-- 商品名稱 -->\n              <h5 class=\"row overflow-hidden\">\n                <div class=\"card-title col-10 overflow-hidden productcard-title\"\n                :title=\"item.title\">\n                  {{ item.title }}\n                </div>\n                <!-- 加入收藏 -->\n                <div class=\"mw-25 text-end col-2 add-favorite\">\n                  <a href=\"#\" @click.stop.prevent=\"removefavorite(item)\">\n                    <i class=\"bi bi-heart text-danger\"\n                    v-if=\"idList.every((id) => item.id !== id)\"></i>\n                    <i class=\"bi bi-heart-fill text-danger\"\n                    v-else></i>{{ null }}\n                  </a>\n                </div>\n              </h5>\n              <!-- 商品資訊 -->\n              <p class=\"card-text\">\n                <span class=\"text-decoration-line-through fs-6\"\n                v-if=\"item.origin_price !== item.price\"> NT${{ item.origin_price }}</span>\n                <span class=\"fs-5\"> NT${{ item.price }}</span>\n              </p>\n            </div>\n          </a>\n          <div class=\"card-footer\">\n            <a href=\"#\" class=\"btn btn-danger w-100\"\n            @click.prevent=\"addCart(item)\">加入購物車</a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport cartMixin from '@/mixins/GetCarts';\nimport favoritesMixin from '@/mixins/GetFavorites';\n\nexport default {\n  data() {\n    return {\n      favoriteList: [],\n      pagination: {},\n      page: 1,\n      productCategory: [],\n      idList: [],\n      isLoading: false,\n    };\n  },\n  inject: ['emitter'],\n  methods: {\n    getFavoriteProducts() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http.get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.isLoading = false;\n            const productList = res.data.products;\n            this.pagination = res.data.pagination;\n            const category = [];\n            this.favoriteList = [];\n            productList.forEach((item) => {\n              category.push(item.category);\n              if (this.idList.some((id) => item.id === id)) {\n                this.favoriteList.push(item);\n              }\n            });\n            this.productCategory = category.filter((element, index, arr) => arr.indexOf(element)\n            === index);\n          }\n        })\n        .catch((err) => {\n          this.isLoading = false;\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: err.response.data,\n          });\n        });\n    },\n    addCart(item) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const cart = {\n        product_id: item.id,\n        qty: 1,\n      };\n      this.$http.post(api, { data: cart })\n        .then((res) => {\n          if (res.data.success) {\n            this.isLoading = false;\n            this.getFavoriteProducts();\n            this.getCarts();\n            this.emitter.emit('push-message', {\n              style: 'success',\n              title: res.data.message,\n            });\n          }\n        })\n        .catch((err) => {\n          this.isLoading = false;\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: err.response.data,\n          });\n        });\n    },\n    removefavorite(item) {\n      this.idList.indexOf(item.id);\n      this.idList.splice(this.idList.indexOf(item.id), 1);\n      localStorage.setItem('favoriteItem', JSON.stringify(this.idList));\n      this.getFavoriteProducts();\n      this.getFavorite();\n      this.emitter.emit('push-message', {\n        style: 'danger',\n        title: '已取消收藏',\n      });\n    },\n    goForDetail(id) {\n      this.$router.push(`/products/${id}`);\n    },\n  },\n  mixins: [cartMixin, favoritesMixin],\n  created() {\n    this.getFavoriteProducts();\n    this.getFavorite();\n  },\n  mounted() {\n    this.emitter.emit('page-change', {\n      data: 'favorite',\n    });\n  },\n};\n</script>\n\n<style>\n.productcard{\n  max-width: 276px;\n}\n.productcard-content{\n  text-decoration: none;\n}\n.productcard-pic img{\n  transition: all 1s;\n}\n.productcard-content:hover .productcard-pic img{\n  transform: scale(1.1);\n}\n.productcard-pic{\n  height: 345px;\n  border-radius: 0.375rem 0.375rem 0 0;\n}\n.productcard-content .card-title{\n  max-width: 225px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.product-card-content:nth-child(3n-1){\n  margin: 0 auto;\n}\n.add-favorite{\n  font-size: 20px;\n  transition: font-size .5s;\n}\n.add-favorite:hover{\n  font-size: 23px;\n}\n</style>\n","import { render } from \"./FavoriteView.vue?vue&type=template&id=956a53a0\"\nimport script from \"./FavoriteView.vue?vue&type=script&lang=js\"\nexport * from \"./FavoriteView.vue?vue&type=script&lang=js\"\n\nimport \"./FavoriteView.vue?vue&type=style&index=0&id=956a53a0&lang=css\"\n\nimport exportComponent from \"/Users/maoweichen/chiu/infinity-flowers/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["inject","methods","getCarts","this","isLoading","api","$http","get","then","res","data","success","cartqty","CartList","cartLength","carts","length","forEach","element","qty","emitter","emit","category","getFavorite","localStorage","getItem","tempList","idList","JSON","parse","favoriteLength","console","log","class","_createElementVNode","_createVNode","_component_LoadingOverlay","active","$data","_hoisted_1","favoriteList","_createElementBlock","_hoisted_2","_hoisted_3","type","onClick","_cache","_withModifiers","$event","_ctx","$router","push","_hoisted_4","_hoisted_5","_Fragment","_renderList","item","key","_hoisted_6","href","$options","goForDetail","id","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","src","imageUrl","alt","title","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","removefavorite","every","_hoisted_17","_hoisted_18","_hoisted_19","origin_price","price","_hoisted_20","_hoisted_21","_hoisted_22","addCart","_hoisted_23","pagination","page","productCategory","getFavoriteProducts","productList","products","some","filter","index","arr","indexOf","catch","err","style","response","cart","product_id","post","message","splice","setItem","stringify","mixins","cartMixin","favoritesMixin","created","mounted","__exports__","render"],"sourceRoot":""}